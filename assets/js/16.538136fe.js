(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{345:function(t,s,a){"use strict";a.r(s);var i=a(0),l=Object(i.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"使用背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用背景"}},[t._v("#")]),t._v(" 使用背景")]),t._v(" "),s("p",[t._v("布隆过滤在我们项目中的使用和提出背景: 智能抽图, 图配置连边的时候, 要寻找主键的外键, 需要进行数据相似计算.")]),t._v(" "),s("p",[t._v("目前, 因为内存的限制, 两边分别采样计算相似率colFullMatch(task.a.Values, task.b.Values)/sampleRate, 存在很大的不确定性.")]),t._v(" "),s("p",[t._v("解决的方法就是使用布隆过滤, 一边全量, 一边采样. 全量数据存储在布隆过滤器, 通过存在性判断计算采样数据的相似度.")]),t._v(" "),s("h2",{attrs:{id:"布隆过滤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#布隆过滤"}},[t._v("#")]),t._v(" 布隆过滤")]),t._v(" "),s("p",[t._v("布隆过滤器是一种具有空间优势的概率数据结构, 核心就是一个超大的位数组和哈希函数, 用于回答一个元素是否存在于一个集合中这样的问题, 但是可能会出现误判——即一个元素不在集合但被认为在集合中.")]),t._v(" "),s("h3",{attrs:{id:"布隆过滤基本原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#布隆过滤基本原理"}},[t._v("#")]),t._v(" 布隆过滤基本原理")]),t._v(" "),s("ol",[s("li",[t._v("给定长度为 N个bits 的哈希空间.")]),t._v(" "),s("li",[t._v("选取 d 个哈希函数, 每个哈希函数将给定的元素映射到[0, N-1]的一个位置上, 并将该位置为 1.")]),t._v(" "),s("li",[t._v("将需要被判断的元素也用 2 中的 d 个哈希函数算出 d 个位置 a1,a2,...,ad")]),t._v(" "),s("li",[t._v("如果 a1,a1,...,ad 对应的位有一个不为 1, 则该元素一定不在集合中.")]),t._v(" "),s("li",[t._v("如果 a1,a1,...,ad 对应的位全为 1, 则该元素可能存在于集合中.")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/screen_shot/image2024-3-4_15-47-23.png",alt:"image2024-3-4_15-47-23"}})]),t._v(" "),s("p",[t._v("**从上面可以看出, 一个布隆过滤器应该起码有以下参数: **")]),t._v(" "),s("ol",[s("li",[t._v("哈希空间大小, 记为"),s("strong",[t._v("m")]),t._v(". 以上示例中 m = 20 bits;")]),t._v(" "),s("li",[t._v("元素集合大小, 记为"),s("strong",[t._v("n")]),t._v(". 以上示例中 n = 2;")]),t._v(" "),s("li",[t._v("哈希函数个数, 记为"),s("strong",[t._v("k")]),t._v(". 以上示例中 k = 2;")]),t._v(" "),s("li",[t._v("因为 BF 是 Allowable Errors 的, 可能会出现一个元素原本不在集合中, 但是被错判为存在于集合中, 这个错判的概率叫 false postive, 记为"),s("strong",[t._v("ε")])])]),t._v(" "),s("p",[t._v("错误率最小, 各个参数之间的关系:")]),t._v(" "),s("p",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[s("semantics",[s("mrow",[s("mi",[t._v("k")]),s("mo",[t._v("=")]),s("mfrac",[s("mi",[t._v("m")]),s("mi",[t._v("n")])],1),s("mi",[t._v("ln")]),s("mo",[t._v("⁡")]),s("mn",[t._v("2")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("k = \\frac{m}{n} \\ln2")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"0.6944em"}}),s("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}}),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}})]),s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"1.0404em","vertical-align":"-0.345em"}}),s("span",{staticClass:"mord"},[s("span",{staticClass:"mopen nulldelimiter"}),s("span",{staticClass:"mfrac"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.6954em"}},[s("span",{staticStyle:{top:"-2.655em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mathnormal mtight"},[t._v("n")])])])]),s("span",{staticStyle:{top:"-3.23em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),s("span",{staticStyle:{top:"-3.394em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mathnormal mtight"},[t._v("m")])])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.345em"}},[s("span")])])])]),s("span",{staticClass:"mclose nulldelimiter"})]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.1667em"}}),s("span",{staticClass:"mop"},[t._v("ln")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.1667em"}}),s("span",{staticClass:"mord"},[t._v("2")])])])])]),t._v(" "),s("p",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[s("semantics",[s("mrow",[s("mi",[t._v("m")]),s("mo",[t._v("=")]),s("mo",[t._v("−")]),s("mfrac",[s("mrow",[s("mi",[t._v("n")]),s("mi",[t._v("ln")]),s("mo",[t._v("⁡")]),s("mi",[t._v("ϵ")])],1),s("msup",[s("mrow",[s("mo",{attrs:{fence:"true"}},[t._v("(")]),s("mi",[t._v("ln")]),s("mo",[t._v("⁡")]),s("mn",[t._v("2")]),s("mo",{attrs:{fence:"true"}},[t._v(")")])],1),s("mn",[t._v("2")])],1)],1)],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("m = - \\frac{n \\ln \\epsilon}{{\\left( \\ln 2 \\right)}^2 }")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"0.4306em"}}),s("span",{staticClass:"mord mathnormal"},[t._v("m")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}}),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}})]),s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"1.4653em","vertical-align":"-0.5852em"}}),s("span",{staticClass:"mord"},[t._v("−")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mopen nulldelimiter"}),s("span",{staticClass:"mfrac"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.8801em"}},[s("span",{staticStyle:{top:"-2.5898em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"minner mtight"},[s("span",{staticClass:"mopen mtight delimcenter",staticStyle:{top:"0em"}},[s("span",{staticClass:"mtight"},[t._v("(")])]),s("span",{staticClass:"mop mtight"},[s("span",{staticClass:"mtight"},[t._v("l")]),s("span",{staticClass:"mtight"},[t._v("n")])]),s("span",{staticClass:"mspace mtight",staticStyle:{"margin-right":"0.1952em"}}),s("span",{staticClass:"mord mtight"},[t._v("2")]),s("span",{staticClass:"mclose mtight delimcenter",staticStyle:{top:"0em"}},[s("span",{staticClass:"mtight"},[t._v(")")])])])]),s("span",{staticClass:"msupsub"},[s("span",{staticClass:"vlist-t"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.8575em"}},[s("span",{staticStyle:{top:"-2.8971em","margin-right":"0.0714em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),s("span",{staticClass:"sizing reset-size3 size1 mtight"},[s("span",{staticClass:"mord mtight"},[t._v("2")])])])])])])])])])])]),s("span",{staticStyle:{top:"-3.23em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),s("span",{staticStyle:{top:"-3.394em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mathnormal mtight"},[t._v("n")]),s("span",{staticClass:"mspace mtight",staticStyle:{"margin-right":"0.1952em"}}),s("span",{staticClass:"mop mtight"},[s("span",{staticClass:"mtight"},[t._v("l")]),s("span",{staticClass:"mtight"},[t._v("n")])]),s("span",{staticClass:"mspace mtight",staticStyle:{"margin-right":"0.1952em"}}),s("span",{staticClass:"mord mathnormal mtight"},[t._v("ϵ")])])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.5852em"}},[s("span")])])])]),s("span",{staticClass:"mclose nulldelimiter"})])])])])]),t._v(" "),s("p",[s("span",{staticClass:"katex"},[s("span",{staticClass:"katex-mathml"},[s("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[s("semantics",[s("mrow",[s("mfrac",[s("mi",[t._v("m")]),s("mi",[t._v("n")])],1),s("mo",[t._v("=")]),s("mo",[t._v("−")]),s("mfrac",[s("mrow",[s("msub",[s("mrow",[s("mi",[t._v("log")]),s("mo",[t._v("⁡")])],1),s("mn",[t._v("2")])],1),s("mi",[t._v("ϵ")])],1),s("mrow",[s("mi",[t._v("ln")]),s("mo",[t._v("⁡")]),s("mn",[t._v("2")])],1)],1),s("mo",[t._v("≈")]),s("mo",[t._v("−")]),s("mn",[t._v("1.44")]),s("msub",[s("mrow",[s("mi",[t._v("log")]),s("mo",[t._v("⁡")])],1),s("mn",[t._v("2")])],1),s("mi",[t._v("ϵ")])],1),s("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\frac{m}{n}=- \\frac{\\log_2 \\epsilon}{\\ln 2} \\approx -1.44 \\log_2 \\epsilon")])],1)],1)],1),s("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"1.0404em","vertical-align":"-0.345em"}}),s("span",{staticClass:"mord"},[s("span",{staticClass:"mopen nulldelimiter"}),s("span",{staticClass:"mfrac"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.6954em"}},[s("span",{staticStyle:{top:"-2.655em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mathnormal mtight"},[t._v("n")])])])]),s("span",{staticStyle:{top:"-3.23em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),s("span",{staticStyle:{top:"-3.394em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mord mathnormal mtight"},[t._v("m")])])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.345em"}},[s("span")])])])]),s("span",{staticClass:"mclose nulldelimiter"})]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}}),s("span",{staticClass:"mrel"},[t._v("=")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}})]),s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"1.3272em","vertical-align":"-0.345em"}}),s("span",{staticClass:"mord"},[t._v("−")]),s("span",{staticClass:"mord"},[s("span",{staticClass:"mopen nulldelimiter"}),s("span",{staticClass:"mfrac"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.9822em"}},[s("span",{staticStyle:{top:"-2.655em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mop mtight"},[s("span",{staticClass:"mtight"},[t._v("l")]),s("span",{staticClass:"mtight"},[t._v("n")])]),s("span",{staticClass:"mspace mtight",staticStyle:{"margin-right":"0.1952em"}}),s("span",{staticClass:"mord mtight"},[t._v("2")])])])]),s("span",{staticStyle:{top:"-3.23em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),s("span",{staticStyle:{top:"-3.4961em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[s("span",{staticClass:"mop mtight"},[s("span",{staticClass:"mop mtight"},[s("span",{staticClass:"mtight"},[t._v("l")]),s("span",{staticClass:"mtight"},[t._v("o")]),s("span",{staticClass:"mtight",staticStyle:{"margin-right":"0.01389em"}},[t._v("g")])]),s("span",{staticClass:"msupsub"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.1944em"}},[s("span",{staticStyle:{top:"-2.2341em","margin-right":"0.0714em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),s("span",{staticClass:"sizing reset-size3 size1 mtight"},[s("span",{staticClass:"mord mtight"},[t._v("2")])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.2659em"}},[s("span")])])])])]),s("span",{staticClass:"mspace mtight",staticStyle:{"margin-right":"0.1952em"}}),s("span",{staticClass:"mord mathnormal mtight"},[t._v("ϵ")])])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.345em"}},[s("span")])])])]),s("span",{staticClass:"mclose nulldelimiter"})]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}}),s("span",{staticClass:"mrel"},[t._v("≈")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}})]),s("span",{staticClass:"base"},[s("span",{staticClass:"strut",staticStyle:{height:"0.9386em","vertical-align":"-0.2441em"}}),s("span",{staticClass:"mord"},[t._v("−")]),s("span",{staticClass:"mord"},[t._v("1.44")]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.1667em"}}),s("span",{staticClass:"mop"},[s("span",{staticClass:"mop"},[t._v("lo"),s("span",{staticStyle:{"margin-right":"0.01389em"}},[t._v("g")])]),s("span",{staticClass:"msupsub"},[s("span",{staticClass:"vlist-t vlist-t2"},[s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.207em"}},[s("span",{staticStyle:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),s("span",{staticClass:"sizing reset-size6 size3 mtight"},[s("span",{staticClass:"mord mtight"},[t._v("2")])])])]),s("span",{staticClass:"vlist-s"},[t._v("​")])]),s("span",{staticClass:"vlist-r"},[s("span",{staticClass:"vlist",staticStyle:{height:"0.2441em"}},[s("span")])])])])]),s("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.1667em"}}),s("span",{staticClass:"mord mathnormal"},[t._v("ϵ")])])])])]),t._v(" "),s("p",[s("strong",[t._v("如何选择哈希函数")]),t._v("-murmur3")]),t._v(" "),s("p",[t._v("从概率计算和速度角度, 哈希函数需满足:")]),t._v(" "),s("p",[t._v("1）独立、均匀分布.")]),t._v(" "),s("p",[t._v("2）计算速度快.")]),t._v(" "),s("h3",{attrs:{id:"优缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优缺点"}},[t._v("#")]),t._v(" 优缺点")]),t._v(" "),s("p",[t._v("优点: 内存效率高、查询速度快、可并行处理;")]),t._v(" "),s("p",[t._v("缺点: 误判率, 主要取决于哈希函数的数量和位数组的大小, 哈希冲突;不支持删除、不能获取原始数据, 误判率.")]),t._v(" "),s("p",[t._v("优化: 较大的位数组可以降低误判率, 但会增加内存消耗, 因此需要权衡.")]),t._v(" "),s("h3",{attrs:{id:"应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[t._v("#")]),t._v(" 应用")]),t._v(" "),s("p",[t._v("数据库防止穿库. 使用BloomFilter来减少不存在的行或列的磁盘查找. 避免代价高昂的磁盘查找会大大提高数据库查询操作的性能.")]),t._v(" "),s("p",[t._v("业务场景中判断用户是否阅读过某视频或文章, 比如抖音或头条, 当然会导致一定的误判, 但不会让用户看到重复的内容.")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('m, k := bloom.EstimateParameters(uint(len(md)), 0.001)\nfilter := bloom.New(m, k)\nfor d := range md {\n    if len(d) == 0 {\n        continue\n    }\n    filter.Add([]byte(d))\n}\nif filter.Test([]byte(d)) {\n    fmt.print("数据存在!")\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"性能比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能比较"}},[t._v("#")]),t._v(" 性能比较")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("输入数据量0.01")]),t._v(" "),s("th",[t._v("bloom内存/CPU峰值")]),t._v(" "),s("th",[t._v("map内存/CPU峰值")]),t._v(" "),s("th",[t._v("内存节省")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1w")]),t._v(" "),s("td",[t._v("0.8MB")]),t._v(" "),s("td",[t._v("1.18MB")]),t._v(" "),s("td",[t._v("32.5%")])]),t._v(" "),s("tr",[s("td",[t._v("5w")]),t._v(" "),s("td",[t._v("1.5MB")]),t._v(" "),s("td",[t._v("3.3MB")]),t._v(" "),s("td",[t._v("54.5%")])]),t._v(" "),s("tr",[s("td",[t._v("10w")]),t._v(" "),s("td",[t._v("1.37MB")]),t._v(" "),s("td",[t._v("3.66MB")]),t._v(" "),s("td",[t._v("62%")])]),t._v(" "),s("tr",[s("td",[t._v("50w")]),t._v(" "),s("td",[t._v("2.24MB")]),t._v(" "),s("td",[t._v("23.2MB")]),t._v(" "),s("td",[t._v("90%")])]),t._v(" "),s("tr",[s("td",[t._v("100w")]),t._v(" "),s("td",[t._v("2.7MB")]),t._v(" "),s("td",[t._v("46.1MB")]),t._v(" "),s("td",[t._v("94%")])]),t._v(" "),s("tr",[s("td",[t._v("500w")]),t._v(" "),s("td",[t._v("9.3MB")]),t._v(" "),s("td",[t._v("191.4MB")]),t._v(" "),s("td",[t._v("95%")])]),t._v(" "),s("tr",[s("td",[t._v("1000w")]),t._v(" "),s("td",[t._v("17.6MB")]),t._v(" "),s("td",[t._v("382.5MB")]),t._v(" "),s("td",[t._v("95%")])]),t._v(" "),s("tr",[s("td",[t._v("5000w")]),t._v(" "),s("td",[t._v("61.7MB")]),t._v(" "),s("td",[t._v("1705.2MB")]),t._v(" "),s("td",[t._v("96%")])])])]),t._v(" "),s("p",[t._v("内存占用bloom减少60%-90%+的内存占用")]),t._v(" "),s("p",[t._v("全量插入+全量查询, 耗时记录:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("输入数据量0.01")]),t._v(" "),s("th",[t._v("bloom查询耗时")]),t._v(" "),s("th",[t._v("map查询耗时")]),t._v(" "),s("th",[t._v("耗时增加")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1w")]),t._v(" "),s("td",[t._v("1+1=2ms")]),t._v(" "),s("td",[t._v("508+508=1ms")]),t._v(" "),s("td",[t._v("200%")])]),t._v(" "),s("tr",[s("td",[t._v("5w")]),t._v(" "),s("td",[t._v("5.6+4.8=10.5ms")]),t._v(" "),s("td",[t._v("3.2+3.0=6.3ms")]),t._v(" "),s("td",[t._v("166%")])]),t._v(" "),s("tr",[s("td",[t._v("10w")]),t._v(" "),s("td",[t._v("12+9.6=21.8ms")]),t._v(" "),s("td",[t._v("9+6=15ms")]),t._v(" "),s("td",[t._v("145%")])]),t._v(" "),s("tr",[s("td",[t._v("50w")]),t._v(" "),s("td",[t._v("61.1+52.1=113.2ms")]),t._v(" "),s("td",[t._v("51.6+47.6=99.1ms")]),t._v(" "),s("td",[t._v("114%")])]),t._v(" "),s("tr",[s("td",[t._v("100w")]),t._v(" "),s("td",[t._v("125.9+109.4=235.3ms")]),t._v(" "),s("td",[t._v("136.5+121.5=258ms")]),t._v(" "),s("td",[t._v("91%")])]),t._v(" "),s("tr",[s("td",[t._v("500w")]),t._v(" "),s("td",[t._v("665.5+592=1.26s")]),t._v(" "),s("td",[t._v("723.5+711.8=1.4s")]),t._v(" "),s("td",[t._v("90%")])]),t._v(" "),s("tr",[s("td",[t._v("1000w")]),t._v(" "),s("td",[t._v("1.87+1.5=3.9s")]),t._v(" "),s("td",[t._v("1.48+1.4=2.9s")]),t._v(" "),s("td",[t._v("134%")])]),t._v(" "),s("tr",[s("td",[t._v("3000w")]),t._v(" "),s("td",[t._v("16.5s")]),t._v(" "),s("td",[t._v("9.8s")]),t._v(" "),s("td",[t._v("168%")])]),t._v(" "),s("tr",[s("td",[t._v("5000w")]),t._v(" "),s("td",[t._v("15+13=28s")]),t._v(" "),s("td",[t._v("7.6+7.6=15.2s")]),t._v(" "),s("td",[t._v("184%")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("参考资料")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://hur.st/bloomfilter/?n=0.01k&p=0.1&m=&k=",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bloom filter calculator (hur.st)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.jasondavies.com/bloomfilter/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bloom Filters (jasondavies.com)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://cloud.tencent.com/developer/article/2255688",target:"_blank",rel:"noopener noreferrer"}},[t._v("经典论文解读——布隆过滤器-腾讯云开发者社区-腾讯云 (tencent.com)"),s("OutboundLink")],1)])])])])}),[],!1,null,null,null);s.default=l.exports}}]);